.\" Automatically generated by Pandoc 3.7.0.1
.\"
.TH "CHA-TROUBLESHOOTING" "7"
.SH Troubleshooting Chawan
This document lists common problems you may run into when using Chawan.
.PP
If you encounter a problem not described in this document, please open a
ticket at \c
.UR https://todo.sr.ht/~bptato/chawan
.UE \c
\&.
.SS I can\(cqt select/copy text with my mouse?
Right click \-> select text, then right click \-> copy selection.
.PP
If Chawan complains about xsel, either install it or edit
\f[CR]external.copy\-cmd\f[R] and \f[CR]external.paste\-cmd\f[R] to your
liking.
.SS Why do I get strange/incorrect/ugly colors?
Chawan\(cqs display capabilities depend on what your terminal reports.
In particular:
.IP \(bu 2
if the \f[CR]$COLORTERM\f[R] variable is not set, then it may fall back
to 8\-bit or ANSI colors.
Make sure you export it as \f[CR]COLORTERM=truecolor\f[R].
.IP \(bu 2
if it does not respond to querying the background color, then
Chawan\(cqs color contrast correction will likely malfunction.
you can correct this using the
\f[CR]display.default\-background\-color\f[R]/\f[CR]display.default\-foreground\-color\f[R]
variables.
.PP
See config.md for details.
.SS I set my \f[CR]$PAGER\f[R] to \f[CR]cha\f[R] and now man pages are unreadable.
Most \f[CR]man\f[R] implementations print formatted manual pages by
default, which Chawan \f[I]can\f[R] parse if they are passed through
standard input.
.PP
Unfortunately, mandoc passes us the formatted document as a
\f[I]file\f[R], which Chawan reasonably interprets as plain text without
formatting.
.PP
At this point, you have two options:
.IP \(bu 2
\f[CR]export PAGER=\(aqcha \-T text/x\-ansi\(aq\f[R] and see that man
suddenly works as expected.
.IP \(bu 2
\f[CR]alias man=mancha\f[R] and see that man suddenly works better than
expected.
.PP
Ideally you should do both, to deal with cases like git help which
shells out to man directly.
.PP
There is still one problem with this solution: some programs will try to
call \f[CR]$PAGER\f[R] without shell expansion, breaking the
\f[CR]\-T text/x\-ansi\f[R] trick.
To fix this, put a script somewhere in your \f[CR]PATH\f[R]:
.IP
.EX
\f[I]#!/bin/sh\f[R]
exec cha \-T text/x\-ansi \(dq$\(at\(dq
.EE
.PP
and \f[CR]export PAGER=pcha\f[R] (or whatever you named the script).
.SS How do I view text files with wrapping?
By default, text files are not auto\-wrapped, so viewing plain text
files that were not wrapped properly by the authors is somewhat
annoying.
.PP
A workaround is to add this to your config\(cqs \f[CR][page]\f[R]
section:
.IP
.EX
\(aq f\(aq = \(dqpager.externFilterSource(\(aqfmt\(aq)\(dq
.EE
.PP
and then press \f[CR]<space> f\f[R] to view a wrapped version of the
current text file.
(This assumes your system has an \f[CR]fmt\f[R] program \- if not,
\f[CR]fold \-s\f[R] may be an alternative.)
.PP
To always automatically wrap, you can add this to your user style:
.IP
.EX
plaintext { \f[B]white\-space\f[R]: pre\-wrap }
.EE
.PP
To do the same for HTML and ANSI text, use \f[CR]plaintext, pre\f[R].
.SS Why does \f[CR]$WEBSITE\f[R] look awful?
Usually, this is because it uses some CSS features that are not yet
implemented in Chawan.
The most common offender is grid.
.PP
There are three ways of dealing with this:
.IP "1." 3
If the website\(cqs contents are mostly text, install \c
.UR https://github.com/eafer/rdrview
rdrview
.UE \c
\&.
Then bind the following command to a key of your choice in the config
(e.g.\ \f[CR]<space> r\f[R]):
.RS 4
.PP
\f[CR]\(aq r\(aq = \(dqpager.externFilterSource(\(aqrdrview \-Hu \(rs\(dq$CHA_URL\(rs\(dq\(aq)\(dq\f[R]
.PP
This does not fix the core problem, but will significantly improve your
reading experience anyway.
.RE
.IP "2." 3
Complain \c
.UR https://todo.sr.ht/~bptato/chawan
here
.UE \c
, and wait until the problem goes away.
.IP "3." 3
Write a patch to fix the problem, and send it \c
.UR https://lists.sr.ht/~bptato/chawan-devel
here
.UE \c
\&.
.SS \f[CR]$WEBSITE\f[R]\(cqs interactive features don\(cqt work!
Some potential fixes:
.IP \(bu 2
Logging in to websites requires cookies.
Some websites also require cookie sharing across domains.
For security reasons, Chawan does not allow any of this by default, so
you will have to fiddle with siteconf to fix it.
See config.md#siteconf for details.
.IP \(bu 2
Set the \f[CR]referer\-from\f[R] siteconf value to true; this will cause
Chawan to send a \f[CR]Referer\f[R] header when navigating to other URLs
from the target URL.
.IP \(bu 2
Enable JavaScript.
If something broke, type M\-c M\-c to check the browser console, then
follow step 3.
of the previous answer.
.RS 2
.PP
Warning: remote JavaScript execution is inherently unsafe (inasmuch as
it is in all browsers).
Please only enable JavaScript on websites you trust.
.RE
.SS Text areas discard my edits when I type C\-c in my editor!
This is a bug in your shell: \c
.UR https://people.freebsd.org/~cracauer/homepage-mirror/sigint.html
.UE \c
.PP
When Chawan runs an external text editor, it simply passes the
\f[CR]$EDITOR\f[R] command to the shell, and then examines its \f[I]wait
status\f[R] to determine if your editor exited gracefully.
This works if either the editor never receives a signal, or your shell
implements WCE.
.PP
However, if the editor (e.g.\ nvi) catches SIGINT on C\-c, and the shell
reports that the program was killed by a signal (WUE), then Chawan will
discard your changes (as it believes that the program has crashed).
.PP
The easiest workaround is to remove the shell from the equation using
\f[CR]exec\f[R]:
.IP
.EX
[external]
editor = \(aqexec vi +%d\(aq
.EE
.SS When I open Chawan from aerc, it prints garbage in the search field!
This should be fixed in the latest aerc version.
Please update aerc.
.SS mancha doesn\(cqt work on NixOS?
NixOS includes a broken patch in the package that results in mancha not
finding man pages in some configurations.
I suspect it\(cqs entirely unnecessary, so if this bothers you then
submit a PR to NixOS to remove the patch.
.SS See also
\f[B]cha\f[R](1)
